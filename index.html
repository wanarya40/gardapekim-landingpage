<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download GARDA PEKIM</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 500px;
            width: 100%;
        }

        .app-icon {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    margin: 0 auto 20px;
    background-image: url('https://raw.githubusercontent.com/wanarya40/gardapekim-landingpage/main/logo_gardapekim.png'); /* GANTI DENGAN URL LOGO ANDA */
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    box-shadow: 0 10px 30px rgba(46, 91, 186, 0.4);
    border: 3px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
}

.app-icon:hover {
    transform: scale(1.05);
    box-shadow: 0 15px 40px rgba(46, 91, 186, 0.5);
}

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .version {
            color: #666;
            margin-bottom: 20px;
            font-size: 16px;
        }

        .description {
            color: #555;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .download-btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            display: inline-block;
            margin-bottom: 20px;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(76, 175, 80, 0.3);
        }

        .instructions {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            text-align: left;
        }

        .instruction-step {
            margin-bottom: 10px;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }

        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .qr-code {
            margin: 20px auto;
            padding: 20px;
            background: white;
            border-radius: 10px;
            display: inline-block;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 90vw;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease;
        }

        .modal-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            margin: 5px;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-block;
        }

        .modal-btn:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }

        .modal-btn.primary {
            background: #4CAF50;
        }

        .modal-btn.primary:hover {
            background: #45a049;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            animation: progress 3s infinite;
        }

        .install-steps {
            text-align: left;
            margin: 20px 0;
        }

        .step {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .step-number {
            background: #4CAF50;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .support-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes progress {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }

        .qr-section {
            margin: 30px auto;
            text-align: center;
        }

        .qr-placeholder {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            background: white;
            border: 2px solid #ddd;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            font-size: 14px;
            color: #666;
        }

        .stats-section {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            text-align: center;
        }

        .stat-item {
            flex: 1;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            margin: 0 5px;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #4CAF50;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .download-info {
            background: #e8f5e8;
            border: 1px solid #4CAF50;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #4CAF50;
            animation: pulse 1.5s infinite;
            margin-right: 8px;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="app-icon"></div>
        <h1>GARDA PEKIM</h1>
        <div class="version">Versi 1.0.0</div>
        <div class="description">
            Aplikasi GARDA PEKIM adalah alat Anda untuk menjadi bagian dari solusi. Laporkan kegiatan peduli lingkungan Anda, pantau dampak kolektif kita, dan mari berkolaborasi untuk menciptakan ekosistem maritim yang lebih baik dan berkelanjutan. Unduh sekarang dan jadilah bagian dari perubahan.
        </div>

        <div class="download-info">
            <span class="status-indicator"></span>
            <strong>Server Aktif</strong> - Ready untuk download
        </div>

        <a href="#" class="download-btn" id="downloadBtn" onclick="downloadApp()">
            📱 Download APK (15.3 MB)
        </a>

        <div class="qr-code" id="qrCode" style="display: none;">
            <!-- QR Code akan muncul di sini -->
            <div style="width: 150px; height: 150px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; border: 2px dashed #ccc;">
                QR Code<br>Coming Soon
            </div>
        </div>

        <div class="instructions">
            <h3 style="margin-bottom: 15px; color: #333;">📋 Cara Instalasi:</h3>
            
            <div class="instruction-step">
                <strong>1.</strong> Klik tombol download di atas
            </div>
            
            <div class="instruction-step">
                <strong>2.</strong> Buka Settings → Security → Enable "Unknown Sources" atau "Install from Unknown Sources"
            </div>
            
            <div class="instruction-step">
                <strong>3.</strong> Buka file APK yang sudah didownload
            </div>
            
            <div class="instruction-step">
                <strong>4.</strong> Tap "Install" dan tunggu proses selesai
            </div>
            
            <div class="instruction-step">
                <strong>5.</strong> Aplikasi siap digunakan!
            </div>
        </div>

        <div class="warning">
            <strong>⚠️ Penting:</strong> Ini adalah versi awal dari aplikasi GARDA PEKIM. Jika Anda menemukan masalah atau memiliki masukan, kami akan sangat berterima kasih jika Anda dapat menyampaikannya kepada tim developer.
        </div>

        <div style="margin-top: 20px; color: #666; font-size: 14px;">
            <p>📧 Support: wanarya40@gmail.com</p>
            <p>📱 WhatsApp: +62-853-7242-6008</p>
        </div>
    </div>

    <script>
        // ✅ UPDATED: Link Google Drive Anda yang sudah disesuaikan
        const downloadSources = {
            primary: 'https://drive.google.com/uc?export=download&id=1tv4Uu_YQkhIBiK8qVsBCUSc-ovkn6O5F',
            backup1: 'https://drive.google.com/file/d/1tv4Uu_YQkhIBiK8qVsBCUSc-ovkn6O5F/view?usp=sharing',
            backup2: 'https://drive.google.com/uc?export=download&id=1tv4Uu_YQkhIBiK8qVsBCUSc-ovkn6O5F&confirm=1',
            backup3: 'https://drive.google.com/open?id=1tv4Uu_YQkhIBiK8qVsBCUSc-ovkn6O5F'
        };

        let downloadAttempt = 0;
        const maxAttempts = Object.keys(downloadSources).length;

        function downloadApp() {
            const sources = Object.values(downloadSources);
            const currentSource = sources[downloadAttempt % maxAttempts];
            
            // Show loading state
            const btn = document.getElementById('downloadBtn');
            const originalText = btn.textContent;
            btn.textContent = '⏳ Memproses download...';
            btn.disabled = true;
            
            // Analytics tracking
            if (typeof gtag !== 'undefined') {
                gtag('event', 'download_attempt', {
                    'event_category': 'app',
                    'event_label': `source_${downloadAttempt + 1}`,
                    'value': downloadAttempt + 1
                });
            }
            
            // Increment attempt counter
            downloadAttempt++;
            
            // Update download count
            let downloadCount = parseInt(localStorage.getItem('downloadCount') || '0');
            downloadCount++;
            localStorage.setItem('downloadCount', downloadCount.toString());
            
            // Try download
            try {
                // Show download dialog
                showDownloadDialog(currentSource, originalText, btn);
                
                // Open download link
                const downloadWindow = window.open(currentSource, '_blank');
                
                // Check if popup blocked
                setTimeout(() => {
                    if (!downloadWindow || downloadWindow.closed) {
                        // Fallback: direct navigation
                        window.location.href = currentSource;
                    }
                    
                    // Restore button
                    setTimeout(() => {
                        btn.textContent = originalText;
                        btn.disabled = false;
                    }, 3000);
                }, 1000);
                
            } catch (error) {
                console.error('Download failed:', error);
                
                // Try next source if available
                if (downloadAttempt < maxAttempts) {
                    setTimeout(() => downloadApp(), 2000);
                } else {
                    showErrorDialog(btn, originalText);
                }
            }
        }

        function showDownloadDialog(source, originalText, btn) {
            // Create modal dialog
            const modal = createModal(`
                <div style="text-align: center;">
                    <h3>📱 Download Dimulai</h3>
                    <p>File: <strong>garda-pekim-v1.0.apk</strong></p>
                    <p>Size: <strong>~15.3 MB</strong></p>
                    <p>Server: <strong>Google Drive</strong></p>
                    <div style="margin: 20px 0;">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                    </div>
                    <p style="color: #666; font-size: 14px;">
                        Jika download tidak dimulai otomatis, 
                        <a href="${source}" target="_blank" style="color: #4CAF50;">klik di sini</a>
                    </p>
                    
                    <div style="margin-top: 20px;">
                        <button onclick="closeModal()" class="modal-btn">Tutup</button>
                        <button onclick="showInstallGuide()" class="modal-btn primary">Panduan Install</button>
                    </div>
                </div>
            `);
            
            // Auto close after 10 seconds
            setTimeout(() => {
                if (document.body.contains(modal)) {
                    closeModal();
                }
            }, 10000);
        }

        function showErrorDialog(btn, originalText) {
            btn.textContent = originalText;
            btn.disabled = false;
            
            const modal = createModal(`
                <div style="text-align: center;">
                    <h3 style="color: #e74c3c;">❌ Download Gagal</h3>
                    <p>Terjadi masalah dengan server download.</p>
                    <div style="margin: 20px 0;">
                        <p><strong>Alternatif Download:</strong></p>
                        <div style="margin: 10px 0;">
                            <a href="${downloadSources.primary}" class="modal-btn" target="_blank">Google Drive (Direct)</a>
                        </div>
                        <div style="margin: 10px 0;">
                            <a href="${downloadSources.backup1}" class="modal-btn" target="_blank">Google Drive (Preview)</a>
                        </div>
                    </div>
                    <p style="color: #666; font-size: 14px;">
                        📱 <strong>Hubungi Support:</strong><br>
                        WhatsApp: <a href="https://wa.me/6285372426008" style="color: #4CAF50;">+62-853-7242-6008</a>
                    </p>
                    <button onclick="closeModal()" class="modal-btn primary">Tutup</button>
                </div>
            `);
        }

        function createModal(content) {
            // Remove existing modal
            const existing = document.getElementById('downloadModal');
            if (existing) existing.remove();
            
            const modal = document.createElement('div');
            modal.id = 'downloadModal';
            modal.innerHTML = `
                <div class="modal-overlay" onclick="closeModal()">
                    <div class="modal-content" onclick="event.stopPropagation()">
                        ${content}
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            return modal;
        }

        function closeModal() {
            const modal = document.getElementById('downloadModal');
            if (modal) modal.remove();
        }

        function showInstallGuide() {
            const modal = createModal(`
                <div>
                    <h3>📋 Panduan Instalasi Lengkap</h3>
                    <div class="install-steps">
                        <div class="step">
                            <span class="step-number">1</span>
                            <div>
                                <strong>Download Selesai</strong>
                                <p>Cari file "garda-pekim-v1.0.apk" di folder Download</p>
                            </div>
                        </div>
                        <div class="step">
                            <span class="step-number">2</span>
                            <div>
                                <strong>Izinkan Instalasi</strong>
                                <p>Settings → Security → Enable "Install from Unknown Sources"</p>
                                <small style="color: #666;">Atau Settings → Apps → Install unknown apps</small>
                            </div>
                        </div>
                        <div class="step">
                            <span class="step-number">3</span>
                            <div>
                                <strong>Install Aplikasi</strong>
                                <p>Tap file APK → Tap "Install" → Tunggu proses selesai</p>
                            </div>
                        </div>
                        <div class="step">
                            <span class="step-number">4</span>
                            <div>
                                <strong>Buka Aplikasi</strong>
                                <p>Tap "Open" atau cari ikon "GARDA PEKIM" di home screen</p>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0;">
                        <h4>📱 Troubleshooting</h4>
                        <p style="font-size: 14px; margin: 5px 0;"><strong>Parse Error:</strong> File rusak, download ulang</p>
                        <p style="font-size: 14px; margin: 5px 0;"><strong>App Not Installed:</strong> Enable Unknown Sources</p>
                        <p style="font-size: 14px; margin: 5px 0;"><strong>Storage Full:</strong> Hapus file lain dulu</p>
                    </div>
                    
                    <div class="support-info">
                        <strong>🆘 Butuh Bantuan?</strong><br>
                        WhatsApp: <a href="https://wa.me/6285372426008" style="color: #4CAF50;">+62-853-7242-6008</a><br>
                        Email: <a href="mailto:wanarya40@gmail.com" style="color: #4CAF50;">wanarya40@gmail.com</a>
                    </div>
                    
                    <button onclick="closeModal()" class="modal-btn primary">Mengerti</button>
                </div>
            `);
        }

        // Show QR Code button
        document.addEventListener('DOMContentLoaded', function() {
            const showQR = document.createElement('button');
            showQR.textContent = '📱 Tampilkan QR Code';
            showQR.style.cssText = 'background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 25px; margin: 10px; cursor: pointer; transition: all 0.2s;';
            showQR.onmouseover = function() { this.style.background = '#0056b3'; };
            showQR.onmouseout = function() { this.style.background = '#007bff'; };
            showQR.onclick = function() {
                const qrElement = document.getElementById('qrCode');
                if (qrElement.style.display === 'none' || qrElement.style.display === '') {
                    qrElement.style.display = 'block';
                    this.textContent = '📱 Sembunyikan QR Code';
                } else {
                    qrElement.style.display = 'none';
                    this.textContent = '📱 Tampilkan QR Code';
                }
            };
            document.querySelector('.container').insertBefore(showQR, document.querySelector('.instructions'));
            
            // Update download count display
            const downloadCount = localStorage.getItem('downloadCount') || '0';
            const counter = document.createElement('div');
            counter.id = 'downloadCounter';
            counter.style.cssText = 'margin-top: 10px; color: #666; font-size: 12px;';
            counter.textContent = `📊 Total download: ${downloadCount}`;
            document.querySelector('.version').after(counter);
        });

        // Update counter when download happens
        function updateDownloadCounter() {
            const counter = document.getElementById('downloadCounter');
            const count = localStorage.getItem('downloadCount') || '0';
            if (counter) {
                counter.textContent = `📊 Total download: ${count}`;
            }
        }

        // Test download function
        function testDownload() {
            console.log('Testing download links:');
            Object.entries(downloadSources).forEach(([key, url]) => {
                console.log(`${key}: ${url}`);
            });
        }
    </script>
</body>
</html>


